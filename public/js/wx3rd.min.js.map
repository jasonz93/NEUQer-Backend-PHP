{"version":3,"sources":["wx3rd-annotated.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"wx3rd.min.js","sourcesContent":["/**\n * Created by nicholas on 16-3-28.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app', [\n            'app.core',\n            'app.router',\n            'app.dashboard',\n            'app.mp',\n            'app.mpinfo',\n            'app.reply'\n        ]);\n}());\n/**\n * Created by nicholas on 16-3-28.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.core', [\n            'ui.router',\n            'ngResource'\n        ])\n}());\n/**\n * Created by nicholas on 16-3-28.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.dashboard', [\n            'app.core'\n        ]);\n}());\n/**\n * Created by nicholas on 16-3-29.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.mp', [\n            'app.core'\n        ]);\n}());\n/**\n * Created by nicholas on 16-3-29.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.mpinfo', [\n            'app.core'\n        ]);\n}());\n/**\n * Created by nicholas on 16-3-29.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.reply', [\n            'app.core'\n        ]);\n}());\n/**\n * Created by nicholas on 16-3-28.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.router', [\n            'ui.router'\n        ]);\n}());\n/**\n * Created by nicholas on 16-3-28.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.dashboard')\n        .controller('DashboardController', DashboardController);\n\n    DashboardController.$inject = ['$http'];\n\n    function DashboardController($http) {\n        var vm = this;\n\n    }\n}());\n/**\n * Created by nicholas on 16-3-28.\n */\n(function() {\n\n    'use strict';\n\n    angular\n        .module('app.dashboard')\n        .run(appRun);\n\n    appRun.$inject = ['routerHelper'];\n    /* @ngInject */\n    function appRun(routerHelper) {\n        routerHelper.configureStates(getStates());\n    }\n\n    function getStates() {\n        return [\n            {\n                state: 'dashboard',\n                config: {\n                    url: '/wx3rd/manage/dashboard',\n                    templateUrl: '/views/wx3rd/manage/dashboard/index',\n                    controller: 'DashboardController',\n                    controllerAs: 'vm',\n                    title: 'Dashboard'\n                }\n            }\n        ];\n    }\n})();\n/**\n * Created by nicholas on 16-3-29.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.mp')\n        .controller('MPController', MPController);\n\n    MPController.$inject = ['$http', '$stateParams'];\n\n    function MPController($http, $stateParams) {\n        var vm = this;\n\n        getData();\n\n        function getData() {\n            $http.get('/api/wx3rd/mps').success(function (data) {\n                vm.mps = data;\n            });\n        }\n    }\n}());\n/**\n * Created by nicholas on 16-3-29.\n */\n(function() {\n\n    'use strict';\n\n    angular\n        .module('app.mpinfo')\n        .run(appRun);\n\n    appRun.$inject = ['routerHelper'];\n    /* @ngInject */\n    function appRun(routerHelper) {\n        routerHelper.configureStates(getStates());\n    }\n\n    function getStates() {\n        return [\n            {\n                state: 'mp',\n                config: {\n                    url: '/wx3rd/manage/mp/:mp',\n                    templateUrl: '/views/wx3rd/manage/mp',\n                    controller: 'MPController',\n                    controllerAs: 'vm',\n                    title: 'MP'\n                }\n            }\n        ];\n    }\n})();\n/**\n * Created by nicholas on 16-3-29.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.mpinfo')\n        .controller('MPInfoController', MPInfoController);\n\n    MPInfoController.$inject = ['$http', '$stateParams'];\n\n    function MPInfoController($http, $stateParams) {\n        var vm = this;\n\n        vm.refresh = refresh;\n\n        getData();\n\n        function getData() {\n            $http.get('/api/wx3rd/mp/' + $stateParams.mp + '/info').success(function (data) {\n                vm.mp = data;\n            });\n        }\n\n        function refresh() {\n            $http.get('/api/wx3rd/mp/' + $stateParams.mp + '/refresh').success(function () {\n                getData();\n            });\n        }\n    }\n}());\n/**\n * Created by nicholas on 16-3-29.\n */\n(function() {\n\n    'use strict';\n\n    angular\n        .module('app.mpinfo')\n        .run(appRun);\n\n    appRun.$inject = ['routerHelper'];\n    /* @ngInject */\n    function appRun(routerHelper) {\n        routerHelper.configureStates(getStates());\n    }\n\n    function getStates() {\n        return [\n            {\n                state: 'mp.info',\n                config: {\n                    url: '/info',\n                    templateUrl: '/views/wx3rd/manage/mpinfo/index',\n                    controller: 'MPInfoController',\n                    controllerAs: 'vm',\n                    title: 'MPInfo'\n                }\n            }\n        ];\n    }\n})();\n/**\n * Created by nicholas on 16-3-29.\n */\n(function () {\n    'use strict';\n\n    angular\n        .module('app.reply')\n        .controller('ReplyController', ReplyController);\n\n    ReplyController.$inject = ['$http', '$stateParams'];\n\n    function ReplyController($http, $stateParams) {\n        var vm = this;\n        vm.save = save;\n        vm.showAdd = showAdd;\n        vm.create = create;\n\n        getData();\n\n        function getData() {\n            vm.free = [];\n            vm.using = [];\n            $http.get('/api/wx3rd/mp/' + $stateParams.mp + '/reply/handlers').success(function (handlers) {\n                for (var i in handlers) {\n                    if (handlers[i].priority == 0) {\n                        vm.free.push(handlers[i]);\n                    } else {\n                        vm.using.push(handlers[i]);\n                    }\n                }\n            });\n        }\n\n        function save(handler) {\n            $http.put('/api/wx3rd/mp/' + $stateParams.mp + '/reply/handler/' + handler.id, handler).success(function () {\n                getData();\n            });\n        }\n\n        function create(handler) {\n            $http.post('/api/wx3rd/mp/' + $stateParams.mp + '/reply/handler', handler).success(function () {\n                getData();\n            });\n        }\n\n        function showAdd() {\n            console.log('try to show add modal');\n            vm.showAddModal = true;\n        }\n    }\n}());\n/**\n * Created by nicholas on 16-3-29.\n */\n(function() {\n\n    'use strict';\n\n    angular\n        .module('app.reply')\n        .run(appRun);\n\n    appRun.$inject = ['routerHelper'];\n    /* @ngInject */\n    function appRun(routerHelper) {\n        routerHelper.configureStates(getStates());\n    }\n\n    function getStates() {\n        return [\n            {\n                state: 'mp.reply',\n                config: {\n                    url: '/reply',\n                    templateUrl: '/views/wx3rd/manage/reply/index',\n                    controller: 'ReplyController',\n                    controllerAs: 'vm',\n                    title: 'Reply'\n                }\n            }\n        ];\n    }\n})();\n/**\n * Created by nicholas on 16-3-28.\n */\n/* Help configure the state-base ui.router */\n(function() {\n\n    'use strict';\n\n    angular\n        .module('app.router')\n        .provider('routerHelper', routerHelperProvider);\n\n    routerHelperProvider.$inject = ['$locationProvider', '$stateProvider', '$urlRouterProvider'];\n    /* @ngInject */\n    function routerHelperProvider($locationProvider, $stateProvider, $urlRouterProvider) {\n        /* jshint validthis:true */\n        var config = {\n            docTitle: 'Admin',\n            resolveAlways: {}\n        };\n\n        $locationProvider.html5Mode(true);\n\n        this.configure = function(cfg) {\n            angular.extend(config, cfg);\n        };\n\n        this.$get = RouterHelper;\n        RouterHelper.$inject = ['$location', '$rootScope', '$state'];\n        /* @ngInject */\n        function RouterHelper($location, $rootScope, $state, logger) {\n            var handlingStateChangeError = false;\n            var hasOtherwise = false;\n            var stateCounts = {\n                errors: 0,\n                changes: 0\n            };\n\n            var service = {\n                configureStates: configureStates,\n                getStates: getStates,\n                stateCounts: stateCounts\n            };\n\n            init();\n\n            return service;\n\n            function configureStates(states, otherwisePath) {\n                states.forEach(function(state) {\n                    state.config.resolve =\n                        angular.extend(state.config.resolve || {}, config.resolveAlways);\n                    $stateProvider.state(state.state, state.config);\n                });\n                if (otherwisePath && !hasOtherwise) {\n                    hasOtherwise = true;\n                    $urlRouterProvider.otherwise(otherwisePath);\n                }\n            }\n\n            function handleRoutingErrors() {\n                // Route cancellation:\n                // On routing error, go to the dashboard.\n                // Provide an exit clause if it tries to do it twice.\n                $rootScope.$on('$stateChangeError',\n                    function(event, toState, toParams, fromState, fromParams, error) {\n                        if (handlingStateChangeError) {\n                            return;\n                        }\n                        stateCounts.errors++;\n                        handlingStateChangeError = true;\n                        var destination = (toState &&\n                            (toState.title || toState.name || toState.loadedTemplateUrl)) ||\n                            'unknown target';\n                        var msg = 'Error routing to ' + destination + '. ' +\n                            (error.data || '') + '. <br/>' + (error.statusText || '') +\n                            ': ' + (error.status || '');\n                        logger.warning(msg, [toState]);\n                        $location.path('/');\n                    }\n                );\n            }\n\n            function init() {\n                handleRoutingErrors();\n                updateDocTitle();\n            }\n\n            function getStates() { return $state.get(); }\n\n            function updateDocTitle() {\n                $rootScope.$on('$stateChangeSuccess',\n                    function(event, toState, toParams, fromState, fromParams) {\n                        stateCounts.changes++;\n                        handlingStateChangeError = false;\n                        var title = (toState.title || '') + ' · ' + config.docTitle;\n                        $rootScope.mainUrl = $state.current.url.split('/')[2];\n                        $rootScope.title = title; // data bind to <title>\n                    }\n                );\n            }\n        }\n    }\n\n})();"],"sourceRoot":"/source/"}